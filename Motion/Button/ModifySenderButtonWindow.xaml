<Window x:Class="Motion.UI.ModifySliderWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Modify Sender" Height="880" Width="300"
        WindowStartupLocation="CenterScreen">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 新建Sender部分 -->
        <GroupBox Grid.Row="0" Header="新建Sender" Margin="0,0,0,10">
            <StackPanel>
                <TextBox x:Name="NewSliderValues" Margin="0,5"
                         ToolTip="输入数值，用逗号分隔，例如: 0,100,200,350"/>
                <CheckBox x:Name="AllCombinations" Content="生成所有可能的区间组合" Margin="0,5"/>
                <CheckBox x:Name="NoOverlap" Content="生成不重叠的区间" Margin="0,5"/>
                <Button Content="新建" Click="CreateSenders_Click" Margin="0,5"/>
            </StackPanel>
        </GroupBox>

        <!-- 新增：根据选定区间创建偏移Slider -->
        <GroupBox Grid.Row="1" Header="创建偏移Sender" Margin="0,0,0,10">
            <StackPanel>
                <TextBlock Text="偏移帧数:" Margin="0,5,0,0"/>
                <TextBox x:Name="OffsetFrames" Margin="0,5"
                         ToolTip="输入要偏移的帧数值"
                         IsEnabled="{Binding HasSingleSenderSelected}"/>
                <Button Content="新建偏移" Click="CreateOffsetSender_Click" Margin="0,5"
                        IsEnabled="{Binding HasSingleSenderSelected}"/>
            </StackPanel>
        </GroupBox>

        <!-- 替换区间部分 -->
        <GroupBox Grid.Row="2" Header="替换/插入Sender区间" Margin="0,0,0,10">
            <StackPanel>
                <TextBlock Text="格式: 区间1,区间2 或 区间1,[插入长度],区间2" 
                         Margin="0,5" TextWrapping="Wrap"/>
                <TextBox x:Name="ReplaceValues" Margin="0,5"
                         IsEnabled="{Binding HasSelectedSenders}"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Button Grid.Column="0" Content="替换" 
                            Click="ReplaceRanges_Click" 
                            Margin="0,5,5,0"
                            IsEnabled="{Binding HasSelectedSenders}"/>
                    <Button Grid.Column="1" Content="插入" 
                            Click="InsertRange_Click" 
                            Margin="5,5,0,0"
                            IsEnabled="{Binding HasSelectedSenders}"/>
                </Grid>
            </StackPanel>
        </GroupBox>

        <!-- 调整最小值和最大值部分 -->
        <GroupBox Grid.Row="3" Header="增减" Margin="0,0,0,10">
            <StackPanel>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <StackPanel Grid.Column="0" Margin="0,0,5,0">
                        <TextBlock Text="最小值增减:" Margin="0,5,0,0"/>
                        <TextBox x:Name="MinValueAdjustment" Margin="0,5"
                                 IsEnabled="{Binding HasSelectedSenders}"/>
                    </StackPanel>
                    <StackPanel Grid.Column="1" Margin="5,0,0,0">
                        <TextBlock Text="最大值增减:" Margin="0,5,0,0"/>
                        <TextBox x:Name="MaxValueAdjustment" Margin="0,5"
                                 IsEnabled="{Binding HasSelectedSenders}"/>
                    </StackPanel>
                </Grid>
                <StackPanel Margin="0,5,0,0">
                    <TextBlock Text="循环次数:" Margin="0,0,0,5"/>
                    <TextBox x:Name="LoopCount" Margin="0,0,0,5" 
                             Text="1" 
                             ToolTip="输入调整区间的循环次数（默认为1）"
                             IsEnabled="{Binding HasSelectedSenders}"/>
                </StackPanel>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Button Grid.Column="0" Content="修改当前" 
                            Click="AdjustRangesExisting_Click" 
                            Margin="0,0,5,0"
                            IsEnabled="{Binding HasSelectedSenders}"/>
                    <Button Grid.Column="1" Content="新建" 
                            Click="AdjustRangesNew_Click" 
                            Margin="5,0,0,0"
                            IsEnabled="{Binding HasSelectedSenders}"/>
                    <CheckBox x:Name="AdjustFollowingSenders" Grid.Row="2" Grid.ColumnSpan="2" 
                              Content="同步偏移后续Sender"
                              ToolTip="当调整某个Sender的区间最大值时，自动偏移其后所有Sender的区间(例如50-100,101-150,若调整100变为120，则101-150会变为121-170)" 
                              Margin="0,5,0,0"/>
                    <CheckBox x:Name="AdjustAdjacentSenders" Grid.Row="3" Grid.ColumnSpan="2" 
                              Content="同步调整相邻Sender区间值"
                              ToolTip="当调整Sender的区间值时，自动调整相邻Sender的区间值(例如50-100,101-150,若调整100变为120，则101会变为121)"
                              Margin="0,5,0,0"/>
                </Grid>
            </StackPanel>
        </GroupBox>

        <!-- 合并部分 -->
        <GroupBox Grid.Row="4" Header="合并" Margin="0,0,0,10">
            <Button Content="合并" Click="MergeSenders_Click"
                    IsEnabled="{Binding HasSelectedSenders}"/>
        </GroupBox>

        <!-- 拆分部分 -->
        <GroupBox Grid.Row="5" Header="拆分" Margin="0,0,0,10">
            <StackPanel>
                <TextBox x:Name="SplitValues" Margin="0,5"
                         IsEnabled="{Binding HasSingleSenderSelected}"/>
                <CheckBox x:Name="SplitAllCombinations" Content="生成所有可能的区间组合" 
                         Margin="0,5" IsEnabled="{Binding HasSingleSenderSelected}"/>
                <CheckBox x:Name="SplitNoOverlap" Content="生成不重叠的区间" 
                         Margin="0,5" IsEnabled="{Binding HasSingleSenderSelected}"/>
                <Button Content="拆分" Click="SplitSender_Click" Margin="0,5"
                        IsEnabled="{Binding HasSingleSenderSelected}"/>
            </StackPanel>
        </GroupBox>
        <!-- 在其他按钮组之后添加 -->
        <GroupBox Grid.Row="6" Header="删除" Margin="0,0,0,10">
            <StackPanel>
                <Button Content="删除并调整后续区间" 
                        Click="DeleteAndAdjust_Click" 
                        Margin="0,5"
                        IsEnabled="{Binding HasSelectedSenders}"/>
            </StackPanel>
        </GroupBox>
    </Grid>
</Window>